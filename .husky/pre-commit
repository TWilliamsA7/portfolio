#!/bin/sh

echo "--- Running Husky Pre-Commit Hook: Checking for console.log ---"

# Define the forbidden pattern
FORBIDDEN='console\.(log|info|warn|error|dir|clear|table)'

# Search for the forbidden pattern in all staged files
if git diff --cached --name-only --diff-filter=ACM | grep -E '\.(js|jsx|ts|tsx)$' | xargs grep -E "$FORBIDDEN" --with-filename -n | grep -v '//'
then
  echo ""
  echo "!!! COMMIT ABORTED: Found unremoved console statements! !!!"
  echo "Please remove the statements listed above before committing."
  echo ""
  exit 1
else
  echo "Pre-commit check passed: No console statements found in staged files."
  exit 0
fi